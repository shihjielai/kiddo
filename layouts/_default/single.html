<!-- <html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Document</title>
</head>
<body>

     {{ partial "header" (dict "Kind" .Kind "Template" "Single") }}
     <div style="margin:25px;">
          <h1>{{.Title}}</h1>
          <div style="color:grey; font-size:16px;">{{ dateFormat "Monday, Jan 2, 2006" .Date }}</div>
          <div style="color:grey; font-size:16px;">{{if .Params.author}}Author: {{.Params.Author}}{{end}}</div>
          <div style="font-size:18px;">{{.Content}}</div>
     </div>
     {{$title := .Title}}
     {{with (index .Site.Data .File.TranslationBaseName)}}
          {{$prefix := .urlPrefix}}
          {{$publication := .publication}}
          {{range .cds}}
               {{$cd := .cd}}
               <h2 style="background-color: brown; color: white">{{.cd}}</h2>
               {{range .tracks}}
                    {{range $i, $sequence := (seq .startTrack .endTrack)}}
                         <div style="background-color:bisque">
                              <h3>title: {{printf "Track %02d" $sequence}}</h3>
                              {{$uniqueFilename := (print $publication "-" $cd "-" (printf "track%02d" $sequence))}}
                              <h3>url: {{print $prefix (md5 $uniqueFilename) ".mp3"}}</h3>
                         </div>
                    {{end}}
               {{end}}
          {{end}}
     {{end}}
     <h3>{{$title}}</h3>
    
     {{ partial "footer" . }}
</body>
</html> -->



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <meta name="googlebot" content="noindex,nofollow">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap" rel="stylesheet">
    <style type="text/css">
    .header-nav {
        height:15%;
        width: 100%;
        background-image: url("/images/top_bg.png") ;
        background-repeat: no-repeat;
        background-color: rgb(96, 221, 240);
        background-position: right bottom;
    }

    .header-player {
   background-color: rgb(248,248,255);
    }
    section.main{
        height:100px;
        background-color:#e4e4e4;  
        flex-grow:1;  /*充滿剩餘的空間*/
        overflow-y: auto;
    }

    footer {
        height:7%;
        background-color: rgb(59, 125, 185);
       
        box-shadow:2px 2px 5px cadetblue;
    }
    body{
        display: flex;
        flex-direction: column;
        margin:0;
        height:100vh;
        font-family: 'Noto Sans JP', sans-serif;
    }
    .paper{
        padding:2rem;
        background-color: white;
        margin:1em;
        box-shadow: 2px 2px 5px grey;
    }
    .cdPages {
     display: flex;
     justify-content:flex-start;
     height: 50px;
     background-color: #ffffff;
 
    }
    #CD1{

        width: 25%;
        background-color:rgb(241, 151, 0);
        display: flex;
        justify-content: center;
        align-items:center;
        color:#ffffff;
        font-size: 25px;
        margin-left:15px;
        border-radius: 10%;
        box-shadow:2px 2px 2px darkorange;
    }
    #CD2{
    
        width: 25%;
        background-color:rgb(213, 226, 238);
        display: flex;
        justify-content: center;
        align-items:center;
        color:#666666;
        font-size: 25px;
        margin-left:15px;
        border-radius: 10%;
        box-shadow:2px 2px 2px rgb(177, 196, 173);
     
    }
    .header-player{
        
 
 
  
    }
    @media (min-width: 1199px) and (max-width: 1920px){
      header.header-player{
        width: 992px;
      }
      #CD1, #CD2{
        width: 116px;
      }
      section.paper, section.main {
        width: 992px;
      }
    }
    @media screen and (max-width: 1199px){
      header.header-player{
        width: 930px;
      }
      #CD1, #CD2{
        width:118.25px;
      }
      section.paper, section.main {
        width: 930px;
      }
    }
    @media screen and (max-width: 991px){
      header.header-player{
        width: 768px;
      }
      #CD1, #CD2{
        width:120.5px;
      }
      section.paper, section.main {
        width: 768px;
      }
    }
    @media screen and (max-width: 767px){
      header.header-player {
        width: 576px;
      }
      #CD1, #CD2{
        width:122.75px;
      }
      section.paper, section.main {
        width: 576px;
      }
    }
    @media screen and (max-width: 575px){
      header.header-player{
        width: 435px;
      }
      #CD1, #CD2{
        width: 125px;
      }
      section.paper{
        width: 435px;
        margin-left: 50px;
      }
      section.main {
        width: 435px;
      }
    }

    /* playlist的部分 */
 
    .active a{
      color:#c49b2c;
      text-decoration:none;
    }
    li a{
      color:#371c50;
      padding:5px;
      display:block;
      text-decoration:none;
    }
    li a:hover{
      text-decoration:none;
    }
    a:hover{
      cursor: pointer;
    }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    
<body>
    <header class="header-nav">
        <img src="/images/ReadyGo3.jpg" alt="" style="width:20%">
    </header>
    <!-- <div class="cdPages">
        <div id="CD1">CD1</div>
        <div id="CD2">CD2</div>
    </div> -->


    <header class="header-player" >
     <div style="display: flex;justify-content: center;">
        <div >
          <audio controls="controls" tabindex="0" preload="none" id="testTone" preload="metadata" controlsList="nodownload" > 
          
            <source id="mp3URL" src="/mp3s/ReadyGo2-CD2-track01.mp3" type="audio/mpeg" />

          </audio>
          <div class="adjustPlayer" style="width:20vw">
            <div style="border:1px orange solid">  
              <input type="radio" id="oneMusic" name="loopType" value="oneMusic">
              <label for="oneMusic">單曲循環</label>
              <input type="radio" id="eachMusic" name="loopType" value="eachMusic" checked="true">
              <label for="eachMusic">全部撥放</label><br>
    
            </div>
            <div style="border:1px green solid">
              播放速度
              <a href='#' onclick="speedlow()"><button>慢速</button></a>
              <a href='#' onclick="speednormal()"><button>正常</button></a>
              <a href='#' onclick="speedfast()"><button>快速</button></a>
            </div>
          </div>
          <div >
            <ul id="playlist">
              <li class="active"><a href="/mp3s/ReadyGo2-CD2-track01.mp3" name="Track 01">ReadyGo CD2 track01</a></li>
              <li><a href="/mp3s/ReadyGo2-CD2-track02.mp3" name="Track 02">ReadyGo CD2 track02</a></li>
              <li><a href="/mp3s/ReadyGo2-CD2-track03.mp3" name="Track 03">ReadyGo CD2 track03</a></li>
              <li><a href="/mp3s/ReadyGo2-CD2-track04.mp3" name="Track 04">ReadyGo CD2 track04</a></li>
              <li><a href="/mp3s/ReadyGo2-CD2-track05.mp3" name="Track 05">ReadyGo CD2 track05</a></li>
            </ul>
          </div>
         
        </div>
      
      </div>
      
    </header> 
    
   
  
    <section class="main">




     {{$title := .Title}} 
     {{with (index .Site.Data .File.TranslationBaseName)}}
          {{$prefix := .urlPrefix}}
          {{$publication := .publication}}
          {{range .cds}}
               {{$cd := .cd}}
               <h2 style="background-color: brown; color: white">{{.cd}}</h2>
               {{range .tracks}}
                    {{range $i, $sequence := (seq .startTrack .endTrack)}}
                         <div style="background-color:bisque">
                              <a  onclick="mySong(this)" style="text-decoration: none;" name='{{printf "Track %02d" $sequence}}'><h3>{{printf "Track %02d" $sequence}}</h3></a>
                              

                              <!-- {{$uniqueFilename := (print $publication "-" $cd "-" (printf "track%02d" $sequence))}} -->
                             <!-- <h3>未hash之檔名: {{print $publication "-" $cd "-" (printf "track%02d" $sequence)}}</h3> -->
                              <!-- <h3>url: {{print $prefix (md5 $uniqueFilename) ".mp3"}}</h3> -->
                         </div>
                    {{end}}
               {{end}}
          {{end}}
     {{end}}
     <h3>{{$title}}</h3>

    </section>

    <footer></footer>
    {{ partial "footer" . }}

    
    <script>

      function speedlow(){
        var myaudio = document.getElementById('testTone');
          console.log(myaudio);
          myaudio.playbackRate = 0.5;
          console.log('myaudio.playbackRate = 0.5;')
   
      }

      function speednormal(){
        var myaudio = document.getElementById('testTone');
          console.log(myaudio);
          myaudio.playbackRate = 1.0;
          console.log('myaudio.playbackRate = 1.0;')
      }
  
      function speedfast(){
        var myaudio = document.getElementById('testTone');
          console.log(myaudio);
          myaudio.playbackRate = 1.5;
          console.log('myaudio.playbackRate = 1.5;')
      }

      function mySong(e){
         console.log(e.getAttribute('name'));
         console.log('typeog e.getAttribute("name")', typeof e.getAttribute('name'));
        }
      $(function(){

         
 
      // 目前不需要
      // function updatePlayer(){
      //   var myaudio = document.getElementById('testTone');
      //   myaudio.onloadedmetadata = function() {     //可抓到音樂總長度
      //   console.log(myaudio.duration)

      //   var tracklength = document.getElementById('musicLength');  //把音樂總長度顯示在tracklength上
      //   var min=parseInt(myaudio.duration/60);
      //   var sec =parseInt(myaudio.duration) - min*60;
      //   tracklength.innerHTML+= `${min} : ${sec}` ; 
      //   };


        // myaudio.addEventListener('ended',function(){    //  上一首播放結束之後  執行...

        // var playerHeader = document.querySelector('.header-player');      
        // playerHeader.innerHTML='';
        // console.log('playerHeader :',playerHeader);
        // playerHeader.innerHTML=`
        // <audio controls="controls" id="testTone" preload="metadata">      
        //     <source id="mp3URL" src="/mp3s/ReadyGo2-CD2-track02.mp3" type="audio/mpeg" />   
        // </audio>
        // &nbsp &nbsp  &nbsp &nbsp <p id="musicLength">音樂長度: </p>`;
        
        // updatePlayer();
       
      //  });

      // }
      
      // updatePlayer();


     //播放速度
     

          var audio;
          var playlist;
          var tracks;
          var current;

          init();
          function init(){
              current = 0;
              audio = $('audio');
              playlist = $('#playlist');
              tracks = playlist.find('li a');
              len = tracks.length;
              audio[0].volume = .10;
              audio[0].play();
              playlist.find('a').click(function(e){
                  e.preventDefault();
                  link = $(this);
                  current = link.parent().index();
                  run(link, audio[0]);
              });
              audio[0].addEventListener('ended',function(e){

                var val=$('input:radio[name="loopType"]:checked').val();

                if(val=="eachMusic"){
                  current++;
                  if(current == len){
                      current = 0;
                      link = playlist.find('a')[0];
                  }else{
                      link = playlist.find('a')[current];    
                  }
                }
                else{
                  link = playlist.find('a')[current]; 
                }
                  run($(link),audio[0]);
              });
          }
          function run(link, player){
                  player.src = link.attr('href');
                  par = link.parent();
                  par.addClass('active').siblings().removeClass('active');
                  audio[0].load();
                  audio[0].play();
          }
        });
    </script>


</body>
</html>
